{% assign is_repo = include.repository.is_repo | default: false %}
{% assign repo_url = include.repository.name | split: '/' %}
{% assign show_owner = site.data.repositories.github_users contains repo_url.first | default: false %}
{% assign lang = site.lang | split: '-' | first %}
{% assign max_lines = site.data.repositories.repo_description_lines_max | default: 2 %}

<div class="repo p-2 text-center">
  {% if is_repo %}
    <a href="{{ include.repository.url }}" target="_blank">
      <img
        class="only-light w-100"
        alt="{{ include.repository.display_name }}"
        src="https://github-readme-stats.vercel.app/api/pin/?username={{ repo_url[0] }}&repo={{ repo_url[1] }}&theme={{ site.repo_theme_light }}&locale={{ lang }}&show_owner={{ show_owner }}&description_lines_count={{ max_lines }}"
      >
      <img
        class="only-dark w-100"
        alt="{{ include.repository.display_name }}"
        src="https://github-readme-stats.vercel.app/api/pin/?username={{ repo_url[0] }}&repo={{ repo_url[1] }}&theme={{ site.repo_theme_dark }}&locale={{ lang }}&show_owner={{ show_owner }}&description_lines_count={{ max_lines }}"
      >
    </a>
  {% else %}
    <a href="{{ include.repository.url }}" target="_blank" class="text-decoration-none w-100">
      <div class="card shadow-sm rounded border repo-card bg-white dark:bg-dark text-dark dark:text-light p-3 text-start">
        <div class="d-flex align-items-center mb-2">
          <svg height="20" width="20" viewBox="0 0 16 16" class="me-2" fill="currentColor">
            <path d="M2 2.5A2.5 2.5 0 014.5 0h7a.5.5 0 01.5.5v.637a.5.5 0 01-.146.354l-1.207 1.207a.5.5 0 00-.147.353V3H4.5A1.5 1.5 0 003 4.5v7A1.5 1.5 0 004.5 13H13a1 1 0 001-1V4.707a1 1 0 00-.293-.707l-1.207-1.207A.5.5 0 0112.5 2V.5a.5.5 0 01.5-.5h.5A2.5 2.5 0 0116 2.5v10a2.5 2.5 0 01-2.5 2.5H2.5A2.5 2.5 0 010 12.5v-8A2.5 2.5 0 012.5 2H2z"/>
          </svg>
          <strong>{{ include.repository.display_name }}</strong>
        </div>
        <div class="text-muted small">
          {{ include.repository.name }}/<code>{{ include.repository.url | split: '/' | last }}</code>
        </div>
      </div>
    </a>
  {% endif %}
</div>
